{"version":3,"file":"glamorous.umd.tiny.js","sources":["../src/constants.js","../src/react-compat.js","../src/with-theme.js","../src/get-glamor-classname.js","../src/create-glamorous.js","../src/tiny.js"],"sourcesContent":["/* istanbul ignore next */\nimport preval from 'preval.macro'\n\nexport const CHANNEL = '__glamorous__'\nexport const isPreact = preval`module.exports = process.env.BUILD_PREACT === 'true'`\n","import React from 'react'\nimport codegen from 'codegen.macro'\nimport {isPreact} from './constants'\n\nlet PropTypes\n\n/* istanbul ignore next */\nif (isPreact) {\n  if (!React.PropTypes) {\n    PropTypes = () => PropTypes\n    const allTypes = [\n      'array',\n      'bool',\n      'func',\n      'number',\n      'object',\n      'string',\n      'symbol',\n      'any',\n      'arrayOf',\n      'element',\n      'instanceOf',\n      'node',\n      'objectOf',\n      'oneOf',\n      'oneOfType',\n      'shape',\n      'exact',\n    ]\n    allTypes.forEach(type => {\n      PropTypes[type] = PropTypes\n    })\n  }\n  // copied from preact-compat\n  /* eslint-disable no-eq-null, eqeqeq, consistent-return */\n  if (!React.Children) {\n    const Children = {\n      map(children, fn, ctx) {\n        if (children == null) {\n          return null\n        }\n        children = Children.toArray(children)\n        if (ctx && ctx !== children) {\n          fn = fn.bind(ctx)\n        }\n        return children.map(fn)\n      },\n      forEach(children, fn, ctx) {\n        if (children == null) {\n          return null\n        }\n        children = Children.toArray(children)\n        if (ctx && ctx !== children) {\n          fn = fn.bind(ctx)\n        }\n        children.forEach(fn)\n      },\n      count(children) {\n        return (children && children.length) || 0\n      },\n      only(children) {\n        children = Children.toArray(children)\n        if (children.length !== 1) {\n          throw new Error('Children.only() expects only one child.')\n        }\n        return children[0]\n      },\n      toArray(children) {\n        if (children == null) {\n          return []\n        }\n        return [].concat(children)\n      },\n    }\n    React.Children = Children\n  }\n  /* eslint-enable no-eq-null, eqeqeq, consistent-return */\n} else if (parseFloat(React.version.slice(0, 4)) >= 15.5) {\n  /* istanbul ignore next */\n  try {\n    PropTypes = codegen`\n      if (process.env.BUILD_FORMAT === 'umd') {\n        module.exports = \"(typeof window !== 'undefined' ? window : global).PropTypes\"\n      } else {\n        module.exports = \"require('prop-types')\"\n      }\n    `\n    /* istanbul ignore next */\n  } catch (error) {\n    // ignore\n  }\n}\n/* istanbul ignore next */\nPropTypes = PropTypes || React.PropTypes\n\nexport {PropTypes}\n\n/*\neslint\n  import/no-mutable-exports:0,\n  import/prefer-default-export:0,\n  react/no-deprecated:0\n */\n","import React from 'react'\n\nimport {CHANNEL} from './constants'\nimport {PropTypes} from './react-compat'\n\nfunction generateWarningMessage(Comp) {\n  const componentName = Comp.displayName || Comp.name || 'FunctionComponent'\n  // eslint-disable-next-line max-len\n  return `glamorous warning: Expected component called \"${componentName}\" which uses withTheme to be within a ThemeProvider but none was found.`\n}\n\nexport default function withTheme(\n  ComponentToTheme,\n  {noWarn = false, createElement = true} = {},\n) {\n  class ThemedComponent extends React.Component {\n    static propTypes = {\n      theme: PropTypes.object,\n    }\n    warned = noWarn\n    state = {theme: {}}\n    setTheme = theme => this.setState({theme})\n\n    // eslint-disable-next-line complexity\n    componentWillMount() {\n      if (!this.context[CHANNEL]) {\n        if (process.env.NODE_ENV !== 'production' && !this.warned) {\n          this.warned = true\n          // eslint-disable-next-line no-console\n          console.warn(generateWarningMessage(ComponentToTheme))\n        }\n      }\n      const {theme} = this.props\n      if (this.context[CHANNEL]) {\n        // if a theme is provided via props,\n        // it takes precedence over context\n        this.setTheme(theme ? theme : this.context[CHANNEL].getState())\n      } else {\n        this.setTheme(theme || {})\n      }\n    }\n\n    componentWillReceiveProps(nextProps) {\n      if (this.props.theme !== nextProps.theme) {\n        this.setTheme(nextProps.theme)\n      }\n    }\n\n    componentDidMount() {\n      if (this.context[CHANNEL] && !this.props.theme) {\n        // subscribe to future theme changes\n        this.subscriptionId = this.context[CHANNEL].subscribe(this.setTheme)\n      }\n    }\n\n    componentWillUnmount() {\n      // cleanup subscription\n      this.subscriptionId &&\n        this.context[CHANNEL].unsubscribe(this.subscriptionId)\n    }\n\n    render() {\n      if (createElement) {\n        return <ComponentToTheme {...this.props} {...this.state} />\n      } else {\n        // this allows us to effectively use the GlamorousComponent\n        // as our `render` method without going through lifecycle hooks.\n        // Also allows us to forward the context in the scenario where\n        // a user wants to add more context.\n        // eslint-disable-next-line babel/new-cap\n        return ComponentToTheme.call(\n          this,\n          {...this.props, ...this.state},\n          this.context,\n        )\n      }\n    }\n  }\n\n  const defaultContextTypes = {\n    [CHANNEL]: PropTypes.object,\n  }\n\n  let userDefinedContextTypes = null\n\n  // configure the contextTypes to be settable by the user,\n  // however also retaining the glamorous channel.\n  Object.defineProperty(ThemedComponent, 'contextTypes', {\n    enumerable: true,\n    configurable: true,\n    set(value) {\n      userDefinedContextTypes = value\n    },\n    get() {\n      // if the user has provided a contextTypes definition,\n      // merge the default context types with the provided ones.\n      if (userDefinedContextTypes) {\n        return {\n          ...defaultContextTypes,\n          ...userDefinedContextTypes,\n        }\n      }\n      return defaultContextTypes\n    },\n  })\n\n  return ThemedComponent\n}\n","import {css, styleSheet} from 'glamor'\n/**\n * This function takes a className string and gets all the\n * associated glamor styles. It's used to merge glamor styles\n * from a className to make sure that specificity is not\n * a problem when passing a className to a component.\n * @param {String} [className=''] the className string\n * @return {Object} { glamorStyles, glamorlessClassName }\n *   - glamorStyles is an array of all the glamor styles objects\n *   - glamorlessClassName is the rest of the className string\n *     without the glamor classNames\n */\nfunction extractGlamorStyles(className) {\n  const glamorlessClassName = []\n  const glamorStyles = []\n  className\n    .toString()\n    .split(' ')\n    .forEach(name => {\n      if (styleSheet.registered[name.substring(4)] === undefined) {\n        glamorlessClassName.push(name)\n      } else {\n        const style = buildGlamorSrcFromClassName(name)\n        glamorStyles.push(style)\n      }\n    })\n\n  return {glamorlessClassName, glamorStyles}\n}\n\n/** Glamor's css function returns an object with the shape\n *\n * {\n *   [`data-css-${hash}`]: '',\n *   toString() { return `css-${hash}` }\n * }\n *\n * Whenever glamor's build function encounters an object with\n * this shape it just pulls the resulting styles from the cache.\n *\n * note: the toString method is not needed to qualify the shape\n **/\nfunction buildGlamorSrcFromClassName(className) {\n  return {[`data-${className}`]: ''}\n}\n\nexport default getGlamorClassName\n\nfunction getGlamorClassName({\n  styles,\n  props,\n  cssOverrides,\n  cssProp,\n  context,\n  displayName,\n}) {\n  const {mappedArgs, nonGlamorClassNames} = handleStyles(\n    [...styles, props.className, cssOverrides, cssProp],\n    props,\n    context,\n  )\n  // eslint-disable-next-line max-len\n  const isDev = process.env.NODE_ENV === 'development' || !process.env.NODE_ENV\n  const devRules = isDev ? {label: displayName} : null\n  const glamorClassName = css(devRules, ...mappedArgs).toString()\n  const extras = nonGlamorClassNames.join(' ').trim()\n  return `${glamorClassName} ${extras}`.trim()\n}\n\n// this next function is on a \"hot\" code-path\n// so it's pretty complex to make sure it's fast.\n// eslint-disable-next-line complexity\nfunction handleStyles(styles, props, context) {\n  let current\n  const mappedArgs = []\n  const nonGlamorClassNames = []\n  for (let i = 0; i < styles.length; i++) {\n    current = styles[i]\n    while (typeof current === 'function') {\n      current = current(props, context)\n    }\n    if (typeof current === 'string') {\n      const {glamorStyles, glamorlessClassName} = extractGlamorStyles(current)\n      mappedArgs.push(...glamorStyles)\n      nonGlamorClassNames.push(...glamorlessClassName)\n    } else if (Array.isArray(current)) {\n      const recursed = handleStyles(current, props, context)\n      mappedArgs.push(...recursed.mappedArgs)\n      nonGlamorClassNames.push(...recursed.nonGlamorClassNames)\n    } else {\n      mappedArgs.push(current)\n    }\n  }\n  return {mappedArgs, nonGlamorClassNames}\n}\n","/*\n * This is a relatively small abstraction that's ripe for open sourcing.\n * Documentation is in the README.md\n */\nimport React from 'react'\nimport {PropTypes} from './react-compat'\nimport withTheme from './with-theme'\nimport getGlamorClassName from './get-glamor-classname'\n\nexport default createGlamorous\n\nfunction createGlamorous(splitProps) {\n  return glamorous\n\n  /**\n   * This is the main export and the function that people\n   * interact with most directly.\n   *\n   * It accepts a component which can be a string or\n   * a React Component and returns\n   * a \"glamorousComponentFactory\"\n   * @param {String|ReactComponent} comp the component to render\n   * @param {Object} options helpful info for the GlamorousComponents\n   * @return {Function} the glamorousComponentFactory\n   */\n  function glamorous(comp, config = {}) {\n    const {\n      rootEl,\n      displayName,\n      shouldClassNameUpdate,\n      filterProps = [],\n      forwardProps = [],\n      propsAreCssOverrides = comp.propsAreCssOverrides,\n      withProps: basePropsToApply,\n    } = config\n    Object.assign(glamorousComponentFactory, {withConfig})\n    return glamorousComponentFactory\n\n    function withConfig(newConfig) {\n      return glamorous(comp, {...config, ...newConfig})\n    }\n\n    /**\n     * This returns a React Component that renders the comp (closure)\n     * with a className based on the given glamor styles object(s)\n     * @param {...Object|Function} styles the styles to create with glamor.\n     *   If any of these are functions, they are invoked with the component\n     *   props and the return value is used.\n     * @return {ReactComponent} the ReactComponent function\n     */\n    function glamorousComponentFactory(...styles) {\n      /**\n       * This is a component which will render the comp (closure)\n       * with the glamorous styles (closure). Forwards any valid\n       * props to the underlying component.\n       */\n      const GlamorousComponent = withTheme(\n        function GlamorousInnerComponent(props, context) {\n          props = getPropsToApply(\n            GlamorousComponent.propsToApply,\n            {},\n            props,\n            context,\n          )\n          const updateClassName = shouldUpdate(props, context, this.previous)\n\n          if (shouldClassNameUpdate) {\n            this.previous = {props, context}\n          }\n\n          const {toForward, cssOverrides, cssProp} = splitProps(\n            props,\n            GlamorousComponent,\n          )\n\n          // create className to apply\n          this.className = updateClassName\n            ? getGlamorClassName({\n                styles: GlamorousComponent.styles,\n                props,\n                cssOverrides,\n                cssProp,\n                context,\n                displayName: GlamorousComponent.displayName,\n              })\n            : this.className\n\n          return React.createElement(GlamorousComponent.comp, {\n            // if innerRef is forwarded we don't want to apply it here\n            ref: 'innerRef' in toForward ? undefined : props.innerRef,\n            ...toForward,\n            className: this.className,\n          })\n        },\n        {noWarn: true, createElement: false},\n      )\n\n      GlamorousComponent.propTypes = {\n        // className accepts an object due to glamor's css function\n        // returning an object with a toString method that gives the className\n        className: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n        cssOverrides: PropTypes.object,\n        innerRef: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n        glam: PropTypes.object,\n      }\n\n      function withComponent(newComp, options = {}) {\n        const {\n          forwardProps: fwp,\n          filterProps: flp,\n          ...componentProperties\n        } = GlamorousComponent\n        return glamorous(\n          {\n            ...componentProperties,\n            comp: newComp,\n            rootEl: getRootEl(newComp),\n          },\n          {\n            // allows the forwardProps and filterProps to be overridden\n            forwardProps: fwp,\n            filterProps: flp,\n            ...options,\n          },\n        )()\n      }\n\n      function withProps(...propsToApply) {\n        return glamorous(GlamorousComponent, {withProps: propsToApply})()\n      }\n\n      function shouldUpdate(props, context, previous) {\n        // exiting early so components which do not use this\n        // optimization are not penalized by hanging onto\n        // references to previous props and context\n        if (!shouldClassNameUpdate) {\n          return true\n        }\n        let update = true\n        if (previous) {\n          if (\n            !shouldClassNameUpdate(\n              previous.props,\n              props,\n              previous.context,\n              context,\n            )\n          ) {\n            update = false\n          }\n        }\n\n        return update\n      }\n\n      Object.assign(\n        GlamorousComponent,\n        getGlamorousComponentMetadata({\n          comp,\n          styles,\n          rootEl,\n          filterProps,\n          forwardProps,\n          displayName,\n          propsToApply: basePropsToApply,\n        }),\n        {\n          isGlamorousComponent: true,\n          propsAreCssOverrides,\n          withComponent,\n          withProps,\n          withConfig,\n        },\n      )\n      return GlamorousComponent\n    }\n  }\n\n  function getGlamorousComponentMetadata({\n    comp,\n    styles,\n    rootEl,\n    filterProps,\n    forwardProps,\n    displayName,\n    propsToApply: basePropsToApply,\n  }) {\n    const componentsComp = comp.comp ? comp.comp : comp\n    const propsToApply = comp.propsToApply\n      ? [...comp.propsToApply, ...arrayify(basePropsToApply)]\n      : arrayify(basePropsToApply)\n    return {\n      // join styles together (for anyone doing: glamorous(glamorous.a({}), {}))\n      styles: when(comp.styles, styles),\n      // keep track of the ultimate rootEl to render (we never\n      // actually render anything but\n      // the base component, even when people wrap a glamorous\n      // component in glamorous\n      comp: componentsComp,\n      rootEl: rootEl || getRootEl(comp),\n      // join forwardProps and filterProps\n      // (for anyone doing: glamorous(glamorous.a({}), {}))\n      forwardProps: when(comp.forwardProps, forwardProps),\n      filterProps: when(comp.filterProps, filterProps),\n      // set the displayName to something that's slightly more\n      // helpful than `GlamorousComponent` :)\n      displayName: displayName || `glamorous(${getDisplayName(comp)})`,\n      // these are props that should be applied to the component at render time\n      propsToApply,\n    }\n  }\n}\n\n/**\n * reduces the propsToApply given to a single props object\n * @param {Array} propsToApply an array of propsToApply objects:\n *   - object\n *   - array of propsToApply items\n *   - function that accepts the accumulated props and the context\n * @param {Object} accumulator an object to apply props onto\n * @param {Object} props the props that should ultimately take precedence\n * @param {*} context the context object\n * @return {Object} the reduced props\n */\nfunction getPropsToApply(propsToApply, accumulator, props, context) {\n  // using forEach rather than reduce here because the reduce solution\n  // effectively did the same thing because we manipulate the `accumulator`\n  propsToApply.forEach(propsToApplyItem => {\n    if (typeof propsToApplyItem === 'function') {\n      return Object.assign(\n        accumulator,\n        propsToApplyItem(Object.assign({}, accumulator, props), context),\n      )\n    } else if (Array.isArray(propsToApplyItem)) {\n      return Object.assign(\n        accumulator,\n        getPropsToApply(propsToApplyItem, accumulator, props, context),\n      )\n    }\n    return Object.assign(accumulator, propsToApplyItem)\n  })\n  // props wins\n  return Object.assign(accumulator, props)\n}\n\nfunction arrayify(x = []) {\n  return Array.isArray(x) ? x : [x]\n}\n\nfunction when(comp, prop) {\n  return comp ? comp.concat(prop) : prop\n}\n\nfunction getRootEl(comp) {\n  return comp.rootEl ? comp.rootEl : comp.comp || comp\n}\n\nfunction getDisplayName(comp) {\n  return typeof comp === 'string'\n    ? comp\n    : comp.displayName || comp.name || 'unknown'\n}\n","/* eslint no-unused-vars:0 */\nimport createGlamorous from './create-glamorous'\n\nfunction splitProps(\n  {\n    css: cssProp,\n    innerRef,\n    // these are plucked off\n    theme, // because they\n    className, // should never\n    glam, // be forwarded\n    // to the lower\n    // component ever\n    ...rest\n  },\n  {forwardProps},\n) {\n  // forward innerRef if user wishes to do so\n  if (innerRef !== undefined && forwardProps.indexOf('innerRef') !== -1) {\n    rest.innerRef = innerRef\n  }\n  return {toForward: rest, cssProp}\n}\n\nconst glamorous = createGlamorous(splitProps)\n\nexport default glamorous\n"],"names":["CHANNEL","isPreact","PropTypes","React","forEach","type","Children","children","fn","ctx","toArray","bind","map","length","Error","concat","parseFloat","version","slice","error","generateWarningMessage","Comp","componentName","displayName","name","withTheme","ComponentToTheme","noWarn","createElement","ThemedComponent","warned","state","theme","setTheme","setState","componentWillMount","context","warn","props","getState","componentWillReceiveProps","nextProps","componentDidMount","subscriptionId","subscribe","componentWillUnmount","unsubscribe","render","call","Component","propTypes","object","defaultContextTypes","userDefinedContextTypes","defineProperty","value","extractGlamorStyles","className","glamorlessClassName","glamorStyles","toString","split","styleSheet","registered","substring","undefined","push","style","buildGlamorSrcFromClassName","getGlamorClassName","styles","cssOverrides","cssProp","handleStyles","mappedArgs","nonGlamorClassNames","devRules","label","glamorClassName","css","extras","join","trim","current","i","Array","isArray","recursed","createGlamorous","splitProps","glamorous","comp","config","rootEl","shouldClassNameUpdate","filterProps","forwardProps","propsAreCssOverrides","basePropsToApply","withProps","assign","glamorousComponentFactory","withConfig","newConfig","GlamorousComponent","getPropsToApply","propsToApply","updateClassName","shouldUpdate","previous","toForward","innerRef","oneOfType","string","func","update","getGlamorousComponentMetadata","newComp","options","fwp","flp","componentProperties","getRootEl","componentsComp","arrayify","when","getDisplayName","accumulator","propsToApplyItem","Object","x","prop","glam","rest","indexOf"],"mappings":"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"}